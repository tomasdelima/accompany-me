<% content_for :page, 'friend' %>


<div class="col-md-11">
  <div class="box">
    <h2>Details of friend</h2>

    <ul class="list-unstyled details">
      <li>
        <span>Name</span>
        <div><%= @friend.name %></div>
      </li>
      <li>
        <span>Declared</span>
        <div>
          <i class="icon <%= @friend.declared ? 'icon-ok' : 'icon-remove' %>"></i>
        </div>
      </li>
      <li>
        <span>Last accompanied</span>
        <div>
          <%= @friend.last_accompanied %>
          <%= @friend.since_last_accompanied %>
        </div>
      </li>
      <li>
        <span>Next accompaniment</span>
        <div>
          <%= @friend.next_accompaniment %>
          <%= @friend.until_next_accompaniment %>
        </div>
      </li>
      <li>
        <span>Accompaniment frequency</span>
        <div>
          <%= @friend.accompaniment_frequency.to_s + ' days' if @friend.accompaniment_frequency %>
        </div>
      </li>
      <li>
        <span>Activities organizing</span>
        <div>
          <% Activity.where(organizer: @friend).each do |activity| %>
            <%= link_to activity.name, activity_path(activity) %>
          <% end %>
        </div>
      </li>

      <li>
        <span>Activities participating</span>
        <div>
          <% @friend.activities.each do |activity| %>
            <%= link_to activity.name, activity_path(activity) %>
          <% end %>
        </div>
      </li>
    </ul>

    <%= link_to 'Edit friend', edit_friend_path, class: 'btn btn-primary' %>
    <%= link_to 'Accompany-me!', new_friend_accompaniment_path(@friend), class: 'btn btn-success' %>
    <%= link_to 'Delete friend', friend_path, method: :delete, confirm: "Are you sure? This will also delete related accompaniments!", class: 'btn btn-danger' %>
  </div>
</div>

<div class="accompaniment">
  <% @friend.accompaniments.each do |accompaniment| %>
    <%= render 'accompaniments/accompaniments', accompaniment: accompaniment %>
  <% end %>
</div>